<%= content_for(:title, "Dashboard") %>
<div class="page-content-wrapper">
  <div class="page-content">
    <!-- BEGIN PAGE HEADER-->
    <div class="row">
      <div class="col-md-12">
        <!-- BEGIN PAGE TITLE & BREADCRUMB-->
        <!-- END PAGE TITLE & BREADCRUMB-->
      </div>
    </div>
    <!-- END PAGE HEADER-->
    <!-- BEGIN DASHBOARD STATS -->
    <div class="row">
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="dashboard-stat blue-madison">
          <div class="visual">
            <i class="fa fa-camera"></i>
          </div>
          <div class="details">
            <div class="number">
              <%= @cameras.count %>
            </div>
            <div class="desc">
              Total Cameras
            </div>
          </div>
          <a class="more" href="/cameras">
            View more <i class="m-icon-swapright m-icon-white"></i>
          </a>
        </div>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="dashboard-stat red-intense">
          <div class="visual">
            <i class="fa fa-video"></i>
          </div>
          <div class="details">
            <div class="number">
              <%= @new_cameras.count %>
            </div>
            <div class="desc">
              Cameras added in the last 30 days
            </div>
          </div>
          <a class="more" href="/cameras">
            View more <i class="m-icon-swapright m-icon-white"></i>
          </a>
        </div>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="dashboard-stat green-haze">
          <div class="visual">
            <i class="fa fa-users"></i>
          </div>
          <div class="details">
            <div class="number">
              <%= @users.count %>
            </div>
            <div class="desc">
              Total Users
            </div>
          </div>
          <a class="more" href="/users">
            View more <i class="m-icon-swapright m-icon-white"></i>
          </a>
        </div>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="dashboard-stat purple-plum">
          <div class="visual">
            <i class="fa fa-user"></i>
          </div>
          <div class="details">
            <div class="number">
              <%= @new_users.count %>
            </div>
            <div class="desc">
              Users registered in the last 30 days
            </div>
          </div>
          <a class="more" href="/users">
            View more <i class="m-icon-swapright m-icon-white"></i>
          </a>
        </div>
      </div>
    </div>
    <!-- END DASHBOARD STATS -->
    <div class="row">
      <div class="col-md-12 col-sm-12">
        <div class="portlet box yellow">
          <div class="portlet-title">
            <div class="caption">
              <i class="fa fa-signal"></i>
              KPI
            </div>
          </div>
          <div class="portlet-body">
            <div class="task-content">
              <table id="tbl-kpi" class="table table-striped table-bordered table-hover">
                <thead>
                <tr role="row" class="heading">
                  <th>&nbsp;</th>

                </tr>
                </thead>
                <tbody>
                <tr class="new-cameras">
                  <td>
                    New Cameras
                  </td>
                </tr>
                <tr class="total-cameras">
                  <td>
                    Total Cameras
                  </td>
                </tr>
                <tr class="new-paid-cameras">
                  <td>
                    New Paid Cameras
                  </td>

                </tr>
                <tr class="total-paid-cameras">
                  <td>
                    Total Paid Cameras
                  </td>

                </tr>
                <tr class="new-users">
                  <td>
                    New Users
                  </td>

                </tr>
                <tr class="total-users">
                  <td>
                    Total Users
                  </td>

                </tr>
                </tbody>
              </table>

            </div>
            <div class="scroller-footer">
              <div class="btn-arrow-link pull-right alignment-top">
                <a href="/kpi">See KPIs</a>
                <i class="icon-arrow-right"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row ">
      <div class="col-md-6 col-sm-6">
        <div class="portlet box blue-steel">
          <div class="portlet-title">
            <div class="caption">
              <i class="fa fa-camera"></i>
              New Cameras
            </div>
          </div>
          <div id="cameras-body" class="portlet-body">
            <div class="task-content">
              <table class="table table-striped table-bordered table-hover table-datatable" id="datatable_ajax">
                <thead>
                <tr role="row" class="heading">
                  <th name="order_name" class="sorting">Name</th>
                  <!--<th name="order_model" class="sorting">Model</th>-->
                  <th name="order_vendor" class="sorting">Vendor</th>
                  <th name="order_created" class="sorting datatable-date">Created At</th>
                </tr>
                </thead>
                <tbody>
                  <% @new_cameras.each do |camera| %>
                    <tr>
                      <td>
                        <%= link_to camera.name, camera_path(camera) %>
                      </td>
                      <td>
                        <%= camera.vendor_model_name %>
                      </td>
                      <!--<td>-->
                        <!--<= camera.vendor_name %>-->
                      <!--</td>-->
                      <td><%= camera.creation_date %></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
            <div class="scroller-footer">
              <div class="btn-arrow-link pull-right alignment-cameras">
                <a href="/cameras">See All Cameras</a>
                <i class="icon-arrow-right"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-sm-6">
        <div class="portlet box green-haze tasks-widget">
          <div class="portlet-title">
            <div class="caption">
              <i class="fa fa-user"></i>
              New Users
            </div>

          </div>
          <div class="portlet-body">
            <div class="task-content">
              <table class="table table-striped table-bordered table-hover table-datatable" id="datatable_ajax">
                <thead>
                <tr role="row" class="heading">
                  <th name="order_name" class="sorting">Name</th>
                  <th name="order_email" class="sorting">Email</th>
                  <th name="order_country" class="sorting">Country</th>
                  <th name="order_registered" class="sorting datatable-date">Registered</th>
                </tr>
                </thead>
                <tbody>
                <% @new_users.each do |user| %>
                    <tr>
                      <td><%= link_to user.fullname, user_path(user) %></td>
                      <td><%= user.email %></td>
                      <td>
                        <% unless user.country_id.nil? %>
                           <%= @countries[user.country_id - 1].name unless @countries[user.country_id - 1].nil? %>
                        <% end %>
                      </td>
                      <td><%= user.registered_at %></td>
                    </tr>
                <% end %>
                </tbody>
              </table>
            </div>
            <div class="task-footer">
              <div class="btn-arrow-link pull-right">
                <a href="/users">See All Users</a>
                <i class="icon-arrow-right"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
    $(document).ready(function () {
        window.initializeDashboard();
    });
</script>
